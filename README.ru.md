[![N|Solid](https://www.maib.md/images/logo.svg)](https://www.maib.md)

# Модуль Maib Payment Gateway для Opencart v. 3.x
Этот плагин позволяет интегрировать ваш Opencart интернет-магазин с **maib e-commerce API** для приема онлайн-платежей (Visa/Mastercard/Google Pay/Apple Pay).

## Описание
Подробнее об этапах интеграции и требованиях к сайту можно узнать [здесь](https://docs.maibmerchants.md/ru/etapy-i-trebovaniya-k-integracii).

Чтобы протестировать интеграцию, вам понадобятся данные доступа к тестовому проекту (Project ID / Project Secret / Signature Key). Для этого просим вас отправить запрос на электронную почту: ecom@maib.md.

Для осуществления реальных платежей вам необходимо заключить договор e-commerce и выполнить как минимум одну успешную транзакцию, используя данные тестового проекта и данные карты для тестирования.

После подписания договора вы получите доступ к платформе maibmerchants и сможете активировать Производственный Проект.

### Шаги для активации Производственного проекта
1. Заполненный профиль в maibmerchants
2. Проверенный профиль
3. Контракт электронной коммерции

## Функционал
**Платежи онлайн**: Visa / Mastercard / Apple Pay / Google Pay.

**Три валюты**: MDL / USD / EUR (в зависимости от настроек вашего проекта).

**Возврат платежа**: Для возврата платежа необходимо обновить статус заказа (см. _return.png_) на статус, выбранный для _Возврат платежа_ в настройках расширения **maib** (см. _settings.png_). Сумма платежа будет возвращена на карту клиента.

## Требования
- Регистрация на платформе maibmerchants.md
- Опенкарт v.3.x
- Расширения _curl_ и _json_ включены

## Установка
1. Загрузите файл расширения с Github или из репозитория Opencart (_maib3.ocmod.zip_).
2. В админ панели Opencart перейдите в раздел _Расширения > Установщик_.
3. Нажмите кнопку _Загрузить_ и выберите файл расширения. После завершения загрузки OpenCart начнет процесс установки.
4. Перейдите в _Расширения > Модификации_ и нажмите кнопку _Обновить_.
5. Перейдите в _Расширения > Расширения_ и выберите тип расширения _Оплата_. Вы должны увидеть расширение **maib** в списке.
6. Нажмите кнопку _Установить_.
7. Нажмите кнопку _Изменить_ чтобы выполнить необходимые настройки.

## Настройки
1. Заголовок — название способа оплаты, отображаемое покупателю на странице оформления заказа.
2. Статус - включить/отключить расширение.
3. Отладка - включить/отключить логи расширений в файле _maib.log_.
4. Порядок сортировки - порядок сортировки способа оплаты на странице оформления заказа.
5. Геозона - выберите географический регион, к котором будет применяться способ оплаты.
6. Project ID - Project ID из Проекта (Тестовый или Производственный) в maibmerchants.
7. Project Secret -  Project Secret из Проекта (Тестовый или Производственный) в maibmerchants. Доступен после активации проекта.
8. Signature Key - Signature Key из Проекта (Тестовый или Производственный) в maibmerchants. Доступен после активации проекта.
9. Ok URL / Fail URL / Callback URL - добавьте эти ссылки в соответствующие поля в настройках Проекта в maibmerchants.
10. Настройки статуса заказа: Платеж в ожидании - Статус заказа, когда платеж находится в ожидании.
11. Настройки статуса заказа: Успешная оплата - Статус заказа после успешного завершения платежа.
12. Настройки статуса заказа: Неуспешная оплата - Статус заказа при неуспешной оплаты.
13. Настройки статуса заказа: Возврат платежа - Статус заказа при возврате платежа. Для возврата платежа обновите статус заказа до этого выбранного статуса (см. _refund.png_).

## Отладка
Включите режим отладки в настройках раширении и проверьте логи в файле _maib.log_.

Если вам требуется дополнительная помощь, обращайтесь в службу поддержки ecommerce **maib**, отправив сообщние по адресу ecom@maib.md.

В письме обязательно укажите следующую информацию:
- Название компании
- Project ID 
- Дата и время транзакции с ошибками
- Ошибки из файл с логами
  
